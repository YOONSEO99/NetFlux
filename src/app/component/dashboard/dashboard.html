<div class="dashboard-container">
    <div class="head-content-row">
        <h2>Summary Cards</h2>
        <div class="card-row">
            <div class="card total text-count">
                <h3>Total Devices</h3>
                <p class="count">{{devices.length}}</p>
            </div>
            <div class="card online text-online">
                <h3>Online</h3>
                <p class="count">{{getStatusCount('online')}}</p>
            </div>
            <div class="card offline text-offline">
                <h3>Offline</h3>
                <p class="count">{{getStatusCount('offline')}}</p>
            </div>
        </div>
    </div>
    <div class="main-content-row">
        <section class="inventory-section">
            <h2>inventory</h2>
            <div class="inventory">
                <input type="text" class="inventory-search" placeholder="Search your device">
                <button type="button" class="button filter-btn">Filter by Vendor</button>
                <button type="button" class="button add-device-btn">+ Add Device</button>
                <div class="inventory-box">
                    <table>
                        <thead>
                            <tr>
                                <th>Hostname</th>
                                <th>IP Address</th>
                                <th>Vendor</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            @for (device of devices; track device.id){
                            <tr>
                                <td>{{device.hostname}}</td>
                                <td>{{device.ipAddress}}</td>
                                <td [ngClass]="{
                                'text-cisco' : device.vendor === 'Cisco',
                                'text-arista' : device.vendor === 'Arista'
                            }">{{device.vendor}}</td>
                                <td [ngClass]="{
                                'text-online' : device.status === 'online',
                                'text-offline' : device.status === 'offline'
                            }">{{device.status}}</td>
                            </tr>

                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        <section class="log-section">
            <h2>Logs</h2>
            <div class="log-box">
                @for (log of logs; track log.id){
                <p class="log-text">
                    <span [ngClass]="{
                    'text-error' : log.type === 'ERROR',
                    'text-info' : log.type === 'INFO',
                    'text-warning' : log.type === 'WARNING'
                }">[{{log.type}}]</span> {{log.hostname}} : {{log.timestamp | date:'HH:mm:ss'}} <span [ngClass]="{
                    'text-error' : log.type === 'ERROR',
                    'text-info' : log.type === 'INFO',
                    'text-warning' : log.type === 'WARNING'
                }">{{log.message}}</span>
                </p>
                }
            </div>
        </section>
    </div>
    <div class="topology-container">
        <h2>Network Topology Map</h2>
        <div class="topology-box">
            <svg width="100%" height="100%" viewBox="0 0 1000 250">
                @for (device of devices; track device.id; let i = $index){
                <g [attr.transform]="'translate(' + (100 + (i*80)) + ', 120)'">
                    <circle r="25" [attr.fill]="device.status ==='online'? '#2ecc71' : '#e74c3c'" stroke="#fff"
                        stroke-width="2" />
                    <text y="45" fill="white" text-anchor="middle" font-size="7">
                        {{device.hostname}}
                    </text>
                </g>
                }
            </svg>
        </div>
    </div>
</div>